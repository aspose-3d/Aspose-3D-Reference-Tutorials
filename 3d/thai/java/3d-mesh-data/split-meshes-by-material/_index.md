---
date: 2026-01-27
description: เรียนรู้วิธีแยกเมชอย่างมีประสิทธิภาพตามวัสดุใน Java ด้วย Aspose.3D คู่มือนี้จะแสดงให้คุณเห็นวิธีลดการเรียกวาดและปรับปรุงประสิทธิภาพการเรนเดอร์ขณะแยกเมชตามวัสดุ
linktitle: How to Split Mesh by Material in Java Using Aspose.3D
second_title: Aspose.3D Java API
title: วิธีแยกเมชตามวัสดุใน Java โดยใช้ Aspose.3D
url: /th/java/3d-mesh-data/split-meshes-by-material/
weight: 12
---

{{< blocks/products/pf/main-wrap-class >}}
{{< blocks/products/pf/main-container >}}
{{< blocks/products/pf/tutorial-page-section >}}

# วิธีการแยก Mesh ตามวัสดุใน Java ด้วย Aspose.3D

## บทนำ

หากคุณทำงานกับกราฟิก 3 มิติใน Java คุณจะพบเร็วว่า การประมวลผลเมชขนาดใหญ่สามารถเป็นคอขวดด้านประสิทธิภาพ—โดยเฉพาะอย่างยิ่งเมื่อเมชเดียวมีหลายวัสดุ **การเรียนรู้วิธีการแยกเมช** ตามวัสดุช่วยให้คุณแยกกลุ่มโพลิกอนที่ใช้วัสดุเดียวกันออกจากกัน ทำให้การเรนเดอร์เร็วขึ้น การคัลลิงง่ายขึ้น และการควบคุมการจัดการเทกซ์เจอร์ละเอียดขึ้น ในบทเรียนนี้เราจะพาคุณผ่านขั้นตอนที่แน่นอนเพื่อ **แยกเมชตามวัสดุ** ด้วยไลบรารี Aspose.3D พร้อมคำอธิบายเชิงปฏิบัติ เคล็ดลับการลด draw calls และคำแนะนำในการปรับปรุงประสิทธิภาพการเรนเดอร์

## คำตอบสั้น
- **หมายความว่าอะไรเมื่อพูดถึง “แยกเมชตามวัสดุ”?** มันจะแยกเมชเดียวออกเป็นหลาย sub‑mesh แต่ละอันจะมีโพลิกอนที่ใช้วัสดุเดียวกัน
- **ทำไมต้องใช้ Aspose.3D?** มันให้ API ระดับสูงแบบข้ามแพลตฟอร์มที่ทำให้ซับซ้อนของฟอร์แมตไฟล์ระดับล่างหายไปในขณะที่ยังคงประสิทธิภาพ
- **ใช้เวลานานเท่าไหร่ในการทำการติดตั้ง?** ประมาณ 10–15 นาทีของการเขียนโค้ดและทดสอบ
- **ต้องการใบอนุญาตหรือไม่?** มีรุ่นทดลองฟรี; ใบอนุญาตเชิงพาณิชย์จำเป็นสำหรับการใช้งานในผลิตภัณฑ์
- **รองรับเวอร์ชัน Java ใด?** Java 8 หรือสูงกว่า

## การแยกเมชคืออะไร?

การแยกเมชคือกระบวนการแบ่งเมช 3 มิติที่ซับซ้อนออกเป็นชิ้นส่วนเล็ก ๆ ที่จัดการได้ง่ายขึ้น เมื่อการแยกทำตามวัสดุ แต่ละ sub‑mesh ที่ได้จะมีโพลิกอนที่อ้างอิงวัสดุเดียวเท่านั้น วิธีนี้ช่วยลด draw calls, ปรับปรุงประสิทธิภาพการเรนเดอร์, และทำให้การใช้ shader ต่อวัสดุง่ายขึ้น

## ทำไมต้องแยกเมชตามวัสดุ?

- **ประสิทธิภาพ:** เอนจินการเรนเดอร์สามารถจัดกลุ่ม draw calls ต่อวัสดุได้ ลดการเปลี่ยนแปลงสถานะของ GPU
- **ความยืดหยุ่น:** คุณสามารถใช้เอฟเฟกต์หลังการประมวลผลหรือโลจิกการชนต่าง ๆ ต่อวัสดุได้
- **การจัดการหน่วยความจำ:** เมชขนาดเล็กง่ายต่อการสตรีมเข้าและออกจากหน่วยความจำ ซึ่งสำคัญสำหรับแอปพลิเคชันมือถือหรือ VR
- **ลดจำนวน Draw Calls:** การเปลี่ยนแปลงสถานะน้อยลงทำให้ GPU ประมวลผลเฟรมได้มีประสิทธิภาพมากขึ้น
- **ปรับปรุงประสิทธิภาพการเรนเดอร์:** การแยกวัสดุักทำให้การคัลลิงและการให้แสงดีขึ้น

## ข้อกำหนดเบื้องต้น

ก่อนที่เราจะลงลึกในโค้ด โปรดตรวจสอบว่าคุณมีสิ่งต่อไปนี้:

- ความรู้พื้นฐานการเขียนโปรแกรม Java
- ไลบรารี Aspose.3D สำหรับ Java ติดตั้งแล้ว (ดาวน์โหลดจาก [Aspose website](https://releases.aspose.com/3d/java/))
- IDE เช่น IntelliJ IDEA, Eclipse หรือ VS Code ที่ตั้งค่าไว้สำหรับการพัฒนา Java

## นำเข้าชุดแพ็กเกจ

แรกเริ่มให้ import คลาส Aspose.3D ที่จำเป็นและยูทิลิตี้มาตรฐานของ Java ที่คุณต้องใช้:

```java
import com.aspose.threed.*;

import java.util.Arrays;
```

## คู่มือขั้นตอนโดยละเอียด

ด้านล่างเป็นการเดินผ่านขั้นตอนแต่ละขั้นตอนอย่างกระชับ พร้อมคำอธิบายก่อนบล็อกโค้ดเพื่อให้คุณเข้าใจว่ากำลังเกิดอะไรขึ้น

### ขั้นตอนที่ 1: สร้าง Mesh ของกล่อง

เราเริ่มด้วย primitive เรขาคณิตง่าย ๆ — กล่อง — เพื่อให้เห็นชัดเจนว่าแต่ละหน้า (plane) จะได้รับวัสดุของตนเองในภายหลัง

```java
// ExStart:SplitMeshbyMaterial

// Create a mesh of a box (composed of 6 planes)
Mesh box = (new Box()).toMesh();
```

### ขั้นตอนที่ 2: สร้าง Material Element

`VertexElementMaterial` เก็บดัชนีวัสดุสำหรับแต่ละโพลิกอน โดยการแนบมันเข้ากับเมช เราสามารถควบคุมว่าหน้าใดใช้วัสดุใด

```java
// Create a material element on the box mesh
VertexElementMaterial mat = (VertexElementMaterial) box.createElement(VertexElementType.MATERIAL, MappingMode.POLYGON, ReferenceMode.INDEX);
```

### ขั้นตอนที่ 3: ระบุดัชนีวัสดุที่แตกต่างกัน

ที่นี่เรากำหนดดัชนีวัสดุที่ไม่ซ้ำกันให้กับแต่ละหนึ่งในหกหน้า ของกล่อง ลำดับของอาเรย์ตรงกับลำดับของโพลิกอนที่สร้างโดย primitive `Box`

```java
// Specify different material indices for each plane
mat.setIndices(new int[]{0, 1, 2, 3, 4, 5});
```

### ขั้นตอนที่ 4: แยก Mesh เป็น Sub‑Meshes

การเรียก `PolygonModifier.splitMesh` พร้อม `SplitMeshPolicy.CLONE_DATA` จะสร้าง sub‑mesh ใหม่สำหรับแต่ละดัชนีวัสดุที่แตกต่างกันในขณะที่ยังคงข้อมูลเวอร์เท็กซ์เดิมไว้

```java
// Split the mesh into 6 sub-meshes, each plane becoming a sub-mesh
Mesh[] planes = PolygonModifier.splitMesh(box, SplitMeshPolicy.CLONE_DATA);
```

### ขั้นตอนที่ 5: ปรับดัชนีวัสดุและแยกอีกครั้ง

เพื่อสาธิตกลยุทธ์การแยกที่ต่างออกไป เราจะจัดกลุ่มสามหน้าแรกภายใต้วัสดุ 0 และอีกสามหน้าที่เหลือภายใต้วัสดุ 1 จากนั้นแยกโดยใช้ `COMPACT_DATA` เพื่อลบเวอร์เท็กซ์ที่ไม่ได้ใช้

```java
// Update material indices and split into 2 sub-meshes
mat.getIndices().clear();
mat.setIndices(new int[]{0, 0, 0, 1, 1, 1});
planes = PolygonModifier.splitMesh(box, SplitMeshPolicy.COMPACT_DATA);
```

### ขั้นตอนที่ 6: ยืนยันความสำเร็จ

ข้อความคอนโซลง่าย ๆ จะบอกคุณว่าการดำเนินการเสร็จสมบูรณ์โดยไม่มีข้อผิดพลาด

```java
// Display success message
System.out.println("\nSplitting a mesh by specifying the material successfully.");
// ExEnd:SplitMeshbyMaterial
```

## ลดจำนวน Draw Calls และปรับปรุงประสิทธิภาพการเรนเดอร์

โดยการทำให้แต่ละวัสดุเป็นเมชของตนเอง คุณทำให้กราฟิกพายป์ไลน์สามารถออกคำสั่ง draw call เพียงหนึ่งครั้งต่อวัสดุแทนที่จะเป็นหนึ่งครั้งต่อโพลิกอน การลด draw calls นี้แปลตรง ๆ เป็นอัตราเฟรมที่ราบรื่นขึ้น โดยเฉพาะบนฮาร์ดแวร์ระดับล่าง นอกจากนี้นโยบาย `COMPACT_DATA` ยังลบเวอร์เท็กซ์ที่ไม่ได้ใช้ ลดแบนด์วิธของหน่วยความจำและช่วยให้ GPU เรนเดอร์ได้อย่างมีประสิทธิภาพมากขึ้น

## ปัญหาที่พบบ่อยและวิธีแก้

| ปัญหา | สาเหตุ | วิธีแก้ |
|-------|--------|----------|
| **Sub‑meshes มีเวอร์เท็กซ์ซ้ำ** | การใช้ `CLONE_DATA` คัดลอกข้อมูลเวอร์เท็กซ์ทั้งหมดสำหรับแต่ละ sub‑mesh | เปลี่ยนเป็น `COMPACT_DATA` เมื่อคุณต้องการให้เวอร์เท็กซ์ที่ใช้ร่วมกันถูกลบซ้ำ |
| **การกำหนดวัสดุไม่ถูกต้อง** | ความยาวของอาเรย์ดัชนีไม่ตรงกับจำนวนโพลิกอน | ตรวจสอบจำนวนโพลิกอน (เช่น กล่องมี 6) และให้อาเรย์ดัชนีที่ตรงกัน |

## คำถามที่พบบ่อย

**ถาม: Aspose.3D เข้ากันได้กับไลบรารี Java 3D อื่น ๆ หรือไม่?**  
ตอบ: ใช่, Aspose.3D สามารถทำงานร่วมกับไลบรารีเช่น Java 3D หรือ jMonkeyEngine ทำให้คุณสามารถนำเข้า/ส่งออกเมชระหว่างกันได้

**ถาม: เทคนิคนี้สามารถใช้กับโมเดลที่ซับซ้อนที่มีวัสดุหลายร้อยรายการได้หรือไม่?**  
ตอบ: แน่นอน. การเรียก API เดียวกันทำงานได้ไม่ว่าความซับซ้อนของเมชจะเป็นเท่าไหร่; เพียงตรวจสอบว่าอาเรย์ดัชนีของคุณสะท้อนโครงสร้างวัสดุอย่างถูกต้อง

**ถาม: ฉันจะหาเอกสาร Aspose.3D Java ฉบับเต็มได้จากที่ไหน?**  
ตอบ: เยี่ยมชม [Aspose.3D Java documentation](https://reference.aspose.com/3d/java/) อย่างเป็นทางการสำหรับอ้างอิง API รายละเอียดและตัวอย่างเพิ่มเติม

**ถาม: มีรุ่นทดลองฟรีสำหรับ Aspose.3D for Java หรือไม่?**  
ตอบ: มี, คุณสามารถดาวน์โหลดเวอร์ชันทดลองจาก [Aspose Releases page](https://releases.aspose.com/).

**ถาม: ฉันจะขอรับการสนับสนุนหากเจอปัญหาได้อย่างไร?**  
ตอบ: ฟอรั่มชุมชนของ Aspose ([Aspose.3D forum](https://forum.aspose.com/c/3d/18)) เป็นสถานที่ที่ดีเยี่ยมสำหรับการตั้งคำถามและรับความช่วยเหลือจากทีม Aspose และนักพัฒนาคนอื่น

---

**อัปเดตล่าสุด:** 2026-01-27  
**ทดสอบด้วย:** Aspose.3D for Java 24.11  
**ผู้เขียน:** Aspose  

{{< /blocks/products/pf/tutorial-page-section >}}

{{< /blocks/products/pf/main-container >}}
{{< /blocks/products/pf/main-wrap-class >}}

{{< blocks/products/products-backtop-button >}}